name: invoic_to_json
source_type: EANCOM_INVOIC
target_type: JSON_INVOIC

rules:
  - type: field
    source: /BGM/e2
    target: invoice_number
  - type: field
    source: /DTM/e1
    target: invoice_date
  - type: foreach
    source: /LIN[*]
    target: lines
    rules:
      - type: field
        source: e1
        target: line_number
      - type: field
        source: e3
        target: item_id
      - type: field
        source: QTY/e1
        target: invoiced_quantity
      - type: field
        source: PRI/e1
        target: unit_price
